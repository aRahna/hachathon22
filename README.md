# hachathon22
проект комиков

база данных - первая версия, которую скинули в тг (она слишком тяжелая, не смогли приврепить)

## Анализ данных таблицы
Сначала мы занимались подготовкой данных: извлекли id рецепта из его названия и добавили его в качестве стобца в исходный датасет. Это позволило нам удобно обращаться к конкретным блюдам в таблице. Затем мы несколькими способами группировали данные, чтобы получать новые датасеты, необходимые для дальнейшей работы.

## Облако частотных ингредиентов
Если считать через Pandas, сколько каких аргументов ингредиентов встречается в таблице, самым частотным будет *чеснок*. Однако при составлении word cloud мы лемматизировали все ингредиенты (также состоящие из более чем одного слова). Таким образом, самым частотным получилось слово *соус*. Например, *рыбный соус* менее частотен, чем *чеснок*, но соусов в целом оказалось в датасете гораздо больше. 

## Игры с прорицанием
Мы решили попробовать научить модель Word2Vec работать оракулом: получив введенный пользователем ингредиент, она предлагает список других, встречающихся в рецептах вместе с ним чаще всего. Кроме того, наша модель почти всегда умеет находить лишний ингредиент из предложенного списка.

Мы обучали ее на материале текста, собранного из списка ингредиентов для каждого конкретного блюда (одна строка - один список).
![изображение](https://user-images.githubusercontent.com/72147905/154069244-d94111af-58fc-4bb4-a21b-f44699d67e2e.png)

### Создание сайта.
Основа сайта - мое дз6, в основном его написание не было сложным. Тяжелее было склеивать коды других участников и встраивать их в код, чтобы все функционировало. Единственная действительно трудоемкая задача - соединить функцию поиска рецепта по дата сету с выведением соответствующих ссылок с сайта, т.к. везде разные форматы выдачи.

## Извлечение данных
Для поиска по ингредиентам нам надо было сопоставлять список ингредиентов, которые прислал пользователь со списком ингредиентов каждого рецепта. Но так как может быть такая ситуация, когда в датасете нет такого рецепта, где были бы все данные, отправленные пользователем, мы решили вместо наличия/отсуствия ингредиентов возвращать длину пересечения этих списков. Потом мы это сортировали от большего к меньшему и выбирали 5 рецептов, с наибольшим пересечением и возвращали пользователю списки на эти рецепты. 
Но изначально мы планировали вместо сайта делать бота, для которого лучше вместо датафрейма pandas использовать базу данных. Мы очень долго пытались придуамть, как организовать такой поиск через запросы sql, но в итоге оказалось, что при нефиксированном по длине списке от пользователя такое организовать очень сложно. И мы вернулись к датафреймам pandas.
Еще мы начали готовить данные для поиска по категориям. Мы сделали словарь {категория: списко из рецептов в этой категории}, который позже долже был обрабатыватьс linker() и возвращать пользователь 5 ссылок. 

## Примечание.
Позже мы обнаружили, что ссылки, которые выдает программа, значительно отличаются от желаемых. В них нет тех продуктов, которые мы искали. Скорее всего, это связано с тем, что рецепты из базы данных и с сайта отличаются. 
Например, вот ингредиенты для Арбулястры: 1 - из дата сета, 2 - с сайта.
![изображение](https://user-images.githubusercontent.com/72147905/154064157-8937fea3-7452-4678-afa5-8e9296d21454.png)
![изображение](https://user-images.githubusercontent.com/72147905/154064184-8a223352-9210-48e9-bc23-2245c0aec448.png)

### ишьюсы
Оказывается, соединять части кода, которе были написаны разными участниками команды, это очень сложно... Нас этому не учили, поэтому это было неожиданно долго и chaotic
